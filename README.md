# Webserv (42 Project)

## 📌 概要
本プロジェクトは **C++98 で HTTP サーバーを実装**する課題です。  
サーバーはノンブロッキングで動作し、`poll()`（または `select`/`epoll`/`kqueue`）を用いた **1つのイベントループ**で入出力を処理します。  
実際にブラウザからアクセスでき、NGINXと比較しながら挙動を確認することを目的としています。

---

## ✅ Mandatory Part の達成条件

### 1. サーバーの基本挙動
- `./webserv [configuration file]` で起動可能。
- ノンブロッキングで動作し、`poll()` 等で **すべてのI/Oを一括管理**。
- クライアント切断を正しく処理し、リクエストがハングしない。

### 2. HTTP機能
- **GET / POST / DELETE** をサポート。
- 正しい **HTTPレスポンスコード** を返す。
- **静的ファイル配信**が可能。
- **ファイルアップロード**に対応。
- **CGI** を最低1種類（例: `php-cgi`, `python`）動作させる。

### 3. エラーハンドリング
- **デフォルトエラーページ**を持つ（設定がなくても返せる）。
- リクエストボディサイズ制限など、異常時に正しいレスポンスを返す。

### 4. 設定ファイル
- NGINX風の設定が可能であること：
  - ポートとホストを指定。
  - `server_name` の設定。
  - デフォルトサーバーの指定。
  - エラーページの設定。
  - 各ルートで以下の設定が可能：
    - 許可するHTTPメソッド
    - リダイレクト
    - ルートディレクトリ/ファイル指定
    - ディレクトリリストの有効・無効
    - デフォルトファイル指定
    - CGIの割り当て
    - ファイルアップロードと保存先
- **複数ポートで待ち受け可能**。

### 5. 実用性・テスト
- **ブラウザからアクセス可能**。
- **NGINXと挙動を比較**して正しい動作を確認。
- **ストレステスト**しても落ちず、応答し続ける。

---

## 🚀 推奨実装ステップ
1. **GETリクエストで静的ファイルを返す**（最小限のWebサーバー）
2. **POSTリクエストでファイルアップロード**
3. **DELETEリクエストの実装**
4. **CGI対応**（php-cgi, python など）
5. **設定ファイルでのサーバー/ルート管理**
6. **エラーページやリクエスト制限の追加**
7. **ブラウザ・NGINXとの比較テスト**
8. **ストレステストで安定性確認**

---

## 🔗 参考
- [RFC 2616: Hypertext Transfer Protocol -- HTTP/1.1](https://www.rfc-editor.org/rfc/rfc2616)
- [NGINX Documentation](https://nginx.org/en/docs/)

---

## 🤖 自動 Issue 生成 (GitHub Actions)
`issues/` ディレクトリ内の各 Markdown から GitHub Issue を自動生成/同期するワークフローを追加しています。

### 使い方
1. リポジトリの *Actions* タブを開く
2. `Auto Create Issues from Markdown` を選択
3. `Run workflow` ボタンを押して手動実行 (初回推奨)
4. 以後 `issues/*.md` に変更を push すると自動実行

### 仕様
- フロントマター `title`, `phase`, `id` を読み取りラベル化
- 既に同タイトルの Issue が存在する場合：
  - まだ `<!-- synced:` フッタが無ければ本文更新
  - ある場合はスキップ
- ラベル:
  - `auto-generated`
  - `phase-<n>`
  - `id:<ID>`

### 注意
- タイトル重複は一意性を壊すので避ける
- 削除同期（Issue を閉じる/削除する）は未実装（要望があれば拡張可）
- 依存関係 `deps` は現状ラベル化していない（必要なら拡張可能）

### 拡張案
- `deps` を `dep:F1-02` のように個別ラベルへ
- Closed 状態の自動反映（Done チェックボックス判定）
- Issue コメントに差分サマリ投稿

