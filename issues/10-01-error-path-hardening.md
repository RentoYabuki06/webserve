---
title: フェーズ10: 例外/エラー経路の一掃
phase: 10
estimate: 40-60m
status: open
id: F10-01
deps: [F9-01]
---

## 目的
全 `syscall` 戻りを確認し失敗時も落ちないフェイルセーフ実装。

## 手順
1. 失敗で errno 保存
2. 適切なHTTPエラー変換
3. ログに詳細
4. リソース解放保証 (RAII)

## Done
異常系でクラッシュせずログ記録。

## 補足
CIに簡易異常テスト追加予定。

## 解説 / 背景
異常系網羅で本番安定性向上。失敗→レスポンスに落とし込み。

## リスク / 注意点
- errno 保存前に上書き
- 例外漏れによるクラッシュ

## テスト観点
- ソケット/ファイル失敗シミュレート
- CGI失敗

## 受入チェックリスト
- [ ] 全syscall戻り値チェック
- [ ] エラー経路レスポンス
- [ ] ログ整合

## 簡易コード例
```cpp
#define SAFE_CALL(expr, msg) do { if ((expr) < 0) { Log::error(msg); return false; } } while(0)
```

